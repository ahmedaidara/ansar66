<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ansar - Plateforme de Gestion</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/main.css" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://embed.whereby.com/sdk"></script>
  <script src="/main.js" defer></script>
</head>
<body>
  <header>
    <img src="/assets/images/logo.png" alt="Logo Ansar" id="logo" onerror="this.src='https://via.placeholder.com/100'">
    <nav>
      <a href="#" onclick="showPage('home')" class="nav-item">Accueil</a>
      <a href="#" onclick="showPage('members')" class="nav-item">Membres</a>
      <a href="#" onclick="showPage('events')" class="nav-item">Événements</a>
      <a href="#" onclick="showPage('gallery')" class="nav-item">Galerie</a>
      <a href="#" onclick="showPage('messages')" class="nav-item">Messages</a>
      <a href="#" onclick="showPage('coran')" class="nav-item">Coran</a>
      <a href="#" onclick="showPage('library')" class="nav-item">Bibliothèque</a>
      <a href="#" onclick="showPage('personal')" class="nav-item">Espace Personnel</a>
      <span class="material-icons settings-icon" onclick="showPage('settings')">settings</span>
    </nav>
    <button onclick="toggleTheme()" class="cta-button">Basculer Thème</button>
  </header>

  <main>
    <section id="home" class="page active">
      <h1>Bienvenue sur Ansar</h1>
      <video autoplay muted loop>
        <source src="/assets/videos/intro.mp4" type="video/mp4" onerror="this.parentElement.innerHTML='<img src=/assets/images/logo.png alt=Video indisponible>'">
      </video>
      <div id="event-countdowns"></div>
      <button id="wave-button" class="cta-button">Payer via Wave</button>
      <button id="orange-money-button" class="cta-button">Payer via Orange Money</button>
    </section>

    <section id="members" class="page">
      <h2>Liste des Membres</h2>
      <input type="text" id="members-search" placeholder="Rechercher un membre...">
      <div id="members-list"></div>
    </section>

    <section id="events" class="page">
      <h2>Événements</h2>
      <input type="text" id="events-search" placeholder="Rechercher un événement...">
      <div id="events-list"></div>
    </section>

    <section id="gallery" class="page">
      <h2>Galerie</h2>
      <div id="gallery-content"></div>
    </section>

    <section id="messages" class="page">
      <h2>Messages</h2>
      <div id="messages-list"></div>
      <div id="message-popups"></div>
    </section>

    <section id="coran" class="page">
      <h2>Coran</h2>
      <input type="text" id="coran-search" placeholder="Rechercher un Juz'...">
      <div id="coran-content"></div>
    </section>

    <section id="library" class="page">
      <h2>Bibliothèque</h2>
      <input type="text" id="library-search" placeholder="Rechercher un document...">
      <div id="library-content"></div>
    </section>

    <section id="personal" class="page">
      <h2 id="personal-title">Espace Personnel</h2>
      <div id="personal-login">
        <form id="personal-login-form">
          <input type="text" id="personal-member-code" placeholder="Numéro de membre" required>
          <input type="password" id="personal-password" placeholder="Date de naissance (JJMMAAAA)" required>
          <button type="submit" class="cta-button">Connexion</button>
          <p id="personal-error-message" style="display: none; color: red;"></p>
        </form>
      </div>
      <div id="personal-content" style="display: none;">
        <div id="personal-info"></div>
        <div id="personal-contributions"></div>
        <form id="suggestion-form">
          <textarea id="suggestion-text" placeholder="Votre suggestion..." required></textarea>
          <button type="submit" class="cta-button">Soumettre</button>
        </form>
        <button onclick="logoutPersonal()" class="cta-button">Déconnexion</button>
      </div>
    </section>

    <section id="secret" class="page">
      <h2>Espace Admin</h2>
      <button onclick="showTab('add-member')" class="tab-button">Ajouter Membre</button>
      <button onclick="showTab('edit-members')" class="tab-button">Modifier Membres</button>
      <button onclick="showTab('events-admin')" class="tab-button">Gérer Événements</button>
      <button onclick="showTab('gallery-admin')" class="tab-button">Gérer Galerie</button>
      <button onclick="showTab('messages-admin')" class="tab-button">Gérer Messages</button>
      <button onclick="showTab('auto-messages')" class="tab-button">Messages Automatiques</button>
      <button onclick="showTab('notes')" class="tab-button">Notes</button>
      <button onclick="showTab('internal-docs')" class="tab-button">Documents Internes</button>
      <div id="add-member" class="tab-content">
        <form id="add-member-form">
          <input type="text" id="new-member-firstname" placeholder="Prénom" required>
          <input type="text" id="new-member-lastname" placeholder="Nom" required>
          <input type="number" id="new-member-age" placeholder="Âge">
          <input type="text" id="new-member-dob" placeholder="Date de naissance (JJMMAAAA)">
          <input type="text" id="new-member-birthplace" placeholder="Lieu de naissance">
          <input type="file" id="new-member-photo" accept="image/*">
          <input type="email" id="new-member-email" placeholder="Email">
          <input type="text" id="new-member-activity" placeholder="Activité">
          <input type="text" id="new-member-address" placeholder="Adresse">
          <input type="text" id="new-member-phone" placeholder="Téléphone">
          <input type="text" id="new-member-residence" placeholder="Résidence">
          <select id="new-member-role">
            <option value="membre">Membre</option>
            <option value="admin">Admin</option>
            <option value="tresorier">Trésorier</option>
            <option value="president">Président</option>
            <option value="secretaire">Secrétaire</option>
          </select>
          <select id="new-member-status">
            <option value="actif">Actif</option>
            <option value="inactif">Inactif</option>
            <option value="liste-noire">Liste noire</option>
          </select>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="edit-members" class="tab-content">
        <input type="text" id="edit-member-search" placeholder="Rechercher un membre...">
        <div id="edit-members-list"></div>
        <form id="delete-member-form" style="display: none;">
          <input type="text" id="delete-member-code" placeholder="Code président" required>
          <button type="submit" class="cta-button">Supprimer</button>
        </form>
      </div>
      <div id="events-admin" class="tab-content">
        <input type="text" id="events-admin-search" placeholder="Rechercher un événement...">
        <div id="events-admin-list"></div>
        <form id="add-event-form">
          <input type="text" id="event-name" placeholder="Nom de l'événement" required>
          <textarea id="event-description" placeholder="Description"></textarea>
          <input type="date" id="event-date" required>
          <input type="time" id="event-time" required>
          <input type="file" id="event-file" accept="image/*">
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="gallery-admin" class="tab-content">
        <input type="text" id="gallery-admin-search" placeholder="Rechercher un média...">
        <div id="gallery-admin-list"></div>
        <form id="add-gallery-form">
          <input type="file" id="gallery-file" accept="image/*,video/*" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="messages-admin" class="tab-content">
        <input type="text" id="messages-admin-search" placeholder="Rechercher un message...">
        <div id="messages-admin-list"></div>
        <form id="add-message-form">
          <input type="text" id="message-title" placeholder="Titre" required>
          <textarea id="message-text" placeholder="Message" required></textarea>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="auto-messages" class="tab-content">
        <input type="text" id="auto-messages-search" placeholder="Rechercher un message automatique...">
        <div id="auto-messages-list"></div>
        <form id="add-auto-message-form">
          <input type="text" id="auto-message-name" placeholder="Nom" required>
          <textarea id="auto-message-text" placeholder="Message" required></textarea>
          <input type="date" id="auto-message-date" required>
          <input type="time" id="auto-message-time" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="notes" class="tab-content">
        <input type="text" id="notes-search" placeholder="Rechercher une note...">
        <div id="notes-list"></div>
        <form id="add-note-form">
          <input type="text" id="note-theme" placeholder="Thème" required>
          <textarea id="note-text" placeholder="Note" required></textarea>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
      <div id="internal-docs" class="tab-content">
        <input type="text" id="internal-docs-search" placeholder="Rechercher un document...">
        <div id="internal-docs-list"></div>
        <form id="add-internal-doc-form">
          <input type="text" id="internal-doc-category" placeholder="Catégorie" required>
          <input type="file" id="internal-doc" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
    </section>

    <section id="treasurer" class="page">
      <h2>Espace Trésorier</h2>
      <button onclick="showTab('treasurer-contributions')" class="tab-button">Cotisations</button>
      <div id="treasurer-contributions" class="tab-content">
        <input type="text" id="contributions-admin-search" placeholder="Rechercher une cotisation...">
        <div id="contributions-admin-list"></div>
        <form id="add-contribution-form">
          <input type="text" id="contribution-name" placeholder="Nom de la cotisation" required>
          <input type="number" id="contribution-amount" placeholder="Montant (FCFA)" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
    </section>

    <section id="president" class="page">
      <h2>Espace Président</h2>
      <button onclick="showTab('president-files')" class="tab-button">Fichiers</button>
      <div id="president-files" class="tab-content">
        <input type="text" id="president-files-search" placeholder="Rechercher un fichier...">
        <div id="president-files-list"></div>
        <form id="add-president-file-form">
          <input type="text" id="president-file-category" placeholder="Catégorie" required>
          <input type="file" id="president-file" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
    </section>

    <section id="secretary" class="page">
      <h2>Espace Secrétaire</h2>
      <button onclick="showTab('secretary-files')" class="tab-button">Fichiers</button>
      <div id="secretary-files" class="tab-content">
        <input type="text" id="secretary-files-search" placeholder="Rechercher un fichier...">
        <div id="secretary-files-list"></div>
        <form id="add-secretary-file-form">
          <input type="text" id="secretary-file-category" placeholder="Catégorie" required>
          <input type="file" id="secretary-file" required>
          <button type="submit" class="cta-button">Ajouter</button>
        </form>
      </div>
    </section>

    <section id="settings" class="page">
      <h2>Paramètres</h2>
      <button onclick="toggleTheme()" class="cta-button">Basculer Thème</button>
    </section>

    <section id="video-calls" class="page">
      <h2>Appels Vidéo</h2>
      <input type="checkbox" id="call-all">
      <label for="call-all">Cocher tout</label>
      <input type="text" id="video-calls-search" placeholder="Rechercher un membre...">
      <div id="members-call-list"></div>
      <div id="video-call-container"></div>
      <button onclick="startCall('video')" class="cta-button">Démarrer Appel Vidéo</button>
    </section>
  </main>

  <button class="chatbot-button">
    <span class="material-icons">chat</span>
  </button>
  <div id="chatbot">
    <div id="chatbot-messages">
      <div class="chatbot-message received">
        Bienvenue ! Posez une question ou utilisez un mot-clé comme "association", "membre", "cotisation", etc.
        <button class="clear-chat" onclick="clearChatHistory()">
          <span class="material-icons">delete</span>
        </button>
      </div>
    </div>
    <form id="chatbot-form">
      <input id="chatbot-input" type="text" placeholder="Posez une question...">
      <button type="submit" class="cta-button">Envoyer</button>
    </form>
    <div id="secret-entry" style="display: none;">
      <input id="secret-password" type="password" placeholder="Mot de passe secret">
      <button id="secret-submit" class="cta-button">Valider</button>
    </div>
  </div>

</body>
</html>
